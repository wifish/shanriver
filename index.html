<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>SVG BG</title>
    <script type="text/javascript" src="resource/lib/d3.v3.js"></script>
    <style type="text/css">
        *{padding: 0; margin: 0;}
        body {background: #336666;}
    </style>
</head>

<body>

<div id="container"></div>

<script type="text/javascript">

    var config = {"nodenum":7};

    var data = [];

    var container = d3.select("#container");

    var svg = container.append("svg");
    var node ,link;          


    //预处理数据     
    function process_data(){
        var p ;
        for(var i=0 ;i<config.nodenum;i++){
            p = random_positin();
            data.push({"id":i,"cx":p[0],"cy":p[1]})
        }      
    }          

    //绘图
    function draw(){
      
      //console.log(data)   ;

      node = svg.selectAll(".node")
              .data(data)
              .enter()
              .append("circle")
              .attr("class","node")
              .attr("cx",function(d,i){return d.cx;})
              .attr("cy",function(d,i){return d.cy;})              
              .attr("r",function(d,i){return Math.random() * 20 + 10})
              .style({"fill":"#CC9933",
                "stroke-width":0,
                "stroke":"#99CC99",
                "opacity":0.7})
              ;       
    }

    //
    function redraw(){
        
        var old_height = config.height;    
        var swap = window.innerHeight -  old_height ;
        var buff = swap > 0 ? 1 : -1;


        set_size();    
        

        //node.attr("cx",function(d,i){return d.cx;})
        //    .attr("cy",function(d,i){return d.cy + swap * buff ;});         

               
    }



    //返回任意边上坐标
    function random_positin(){

        var x = Math.random() * (config.width - 0) + 0 ;
        var y = Math.random() * (config.height - 0) + 0;
        var i = Math.floor(Math.random() * 3) ;        

        var base_array = [[x,0],[x,config.height],[0,y],[config.width,y]];

        return  base_array[i];
    }


    //动画
    function animation(){

        
        
    }

    //
    function set_size(){
      config.width = window.innerWidth * 0.986;
      config.height = window.innerHeight * 0.997;

      svg.attr("width",config.width)
         .attr("height",config.height);
    }



    //初始化
    function init(){
      
      set_size();


      //预处理数据
      process_data();

      //初始化模块

      //绘图
      draw();

      //animation();
    }        

    window.onload = function(){init();}   
    window.onresize = function(){redraw();}

</script>
</body>
</html>